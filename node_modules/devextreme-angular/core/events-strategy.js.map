{"version":3,"file":"events-strategy.js","sourceRoot":"","sources":["events-strategy.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * devextreme-angular\n * Version: 17.1.5\n * Build date: Wed Aug 02 2017\n *\n * Copyright (c) 2012 - 2017 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\nimport { EventEmitter, NgZone } from '@angular/core';\r\nimport { DxComponent } from './component';\r\n\r\nconst dxToNgEventNames = {};\r\n\r\ninterface EventSubscriber {\r\n    handler: any;\r\n    unsubscribe: () => void;\r\n}\r\n\r\nexport class NgEventsStrategy {\r\n    private subscribers: { [key: string]: EventSubscriber[] } = {};\r\n\r\n    constructor(private component: DxComponent, private ngZone: NgZone) { }\r\n\r\n    hasEvent(name: string) {\r\n        return this.getEmitter(name).observers.length;\r\n    }\r\n\r\n    fireEvent(name, args) {\r\n        this.ngZone.run(() => {\r\n            this.getEmitter(name).next(args && args[0]);\r\n        });\r\n    }\r\n\r\n    on(name, handler) {\r\n        let eventSubscribers = this.subscribers[name] || [],\r\n            subsriber = this.getEmitter(name).subscribe(handler.bind(this.component.instance)),\r\n            unsubscribe = subsriber.unsubscribe.bind(subsriber);\r\n\r\n        eventSubscribers.push({ handler, unsubscribe });\r\n        this.subscribers[name] = eventSubscribers;\r\n    }\r\n\r\n    off(name, handler) {\r\n        let eventSubscribers = this.subscribers[name] || [];\r\n\r\n        if (handler) {\r\n            eventSubscribers.some((subscriber, i) => {\r\n                if (subscriber.handler === handler) {\r\n                    subscriber.unsubscribe();\r\n                    eventSubscribers.splice(i, 1);\r\n                    return true;\r\n                }\r\n            });\r\n        } else {\r\n            eventSubscribers.forEach(subscriber => {\r\n                subscriber.unsubscribe();\r\n            });\r\n            eventSubscribers.splice(0, eventSubscribers.length);\r\n        }\r\n    }\r\n\r\n    dispose() {}\r\n\r\n    private getEmitter(eventName: string): EventEmitter<any> {\r\n        let ngEventName = dxToNgEventNames[eventName];\r\n        if (!this.component[ngEventName]) {\r\n            this.component[ngEventName] = new EventEmitter();\r\n        }\r\n        return this.component[ngEventName];\r\n    }\r\n}\r\n\r\nexport class EmitterHelper {\r\n    strategy: NgEventsStrategy;\r\n\r\n    constructor(ngZone: NgZone, private component: DxComponent) {\r\n        this.strategy = new NgEventsStrategy(component, ngZone);\r\n    }\r\n    fireNgEvent(eventName: string, eventArgs: any) {\r\n        let emitter = this.component[eventName];\r\n        if (emitter) {\r\n            emitter.next(eventArgs && eventArgs[0]);\r\n        }\r\n    }\r\n    createEmitter(ngEventName: string, dxEventName: string) {\r\n        this.component[ngEventName] = new EventEmitter();\r\n        if (dxEventName) {\r\n            dxToNgEventNames[dxEventName] = ngEventName;\r\n        }\r\n    }\r\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}